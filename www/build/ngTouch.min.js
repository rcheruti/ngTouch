"use strict";function nodeName_(a){return angular.lowercase(a.nodeName||a[0]&&a[0].nodeName)}function makeSwipeDirective(a,b,c){ngTouch.directive(a,["$parse","$swipe",function(d,e){var f=75,g=.3,h=30;return function(i,j,k){function l(a){if(!m)return!1;var c=Math.abs(a.y-m.y),d=(a.x-m.x)*b;return n&&f>c&&d>0&&d>h&&g>c/d}var m,n,o=d(k[a]),p=["touch"];angular.isDefined(k.ngSwipeDisableMouse)||p.push("mouse"),e.bind(j,{start:function(a,b){m=a,n=!0},cancel:function(a){n=!1},end:function(a,b){l(a)&&i.$apply(function(){j.triggerHandler(c),o(i,{$event:b})})}},p)}}])}var ngTouch=angular.module("ngTouch",[]);ngTouch.factory("$swipe",["$parse","$timeout","$rootElement",function(a,b,c){function d(a){var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],d=b.changedTouches&&b.changedTouches[0]||c[0];return{x:d.clientX,y:d.clientY}}function e(a,b){var c=[];return angular.forEach(a,function(a){var d=t[a][b];d&&c.push(d)}),c.join(" ")}function f(a,b,c,d){return Math.abs(a-c)<q&&Math.abs(b-d)<q}function g(a,b,c){for(var d=0;d<a.length;d+=2)if(f(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function h(a){if(!(Date.now()-k>p)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,d=b[0].clientY;1>c&&1>d||m&&m[0]===c&&m[1]===d||(m&&(m=null),"label"===nodeName_(a.target)&&(m=[c,d]),g(l,c,d)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur&&a.target.blur()))}}function i(a){var c=a.touches&&a.touches.length?a.touches:[a],d=c[0].clientX,e=c[0].clientY;l.push(d,e),b(function(){for(var a=0;a<l.length;a+=2)if(l[a]==d&&l[a+1]==e)return void l.splice(a,a+2)},p,!1)}function j(a,b){l||(c[0].addEventListener("click",h,!0),c[0].addEventListener("touchstart",i,!0),l=[]),k=Date.now(),g(l,a,b)}var k,l,m,n=750,o=12,p=2500,q=25,r="ng-click-active",s=10,t={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(a,b,c){function f(){v=!1,a.removeClass(r)}var g,h,i,k,l=!1;if(console.log("pointerTypes",c),c){a.on(e(c,"start"),function(a){i=d(a),l=!0,g=0,h=0,k=i,b.start&&b.start(i,a)});var m=e(c,"cancel");m&&a.on(m,function(a){l=!1,b.cancel&&b.cancel(a)}),a.on(e(c,"move"),function(a){if(l&&i){var c=d(a);if(g+=Math.abs(c.x-k.x),h+=Math.abs(c.y-k.y),k=c,!(s>g&&s>h))return h>g?(l=!1,void(b.cancel&&b.cancel(a))):(a.preventDefault(),void(b.move&&b.move(c,a)))}}),a.on(e(c,"end"),function(a){l&&(l=!1,b.end&&b.end(d(a),a))})}else{var p,q,t,u,v=!1;a.on("touchstart",function(c){v=!0,p=c.target?c.target:c.srcElement,3==p.nodeType&&(p=p.parentNode),a.addClass(r),q=Date.now();var e=c.originalEvent||c,f=e.touches&&e.touches.length?e.touches:[e],j=f[0];t=j.clientX,u=j.clientY,i=d(c),l=!0,g=0,h=0,k=i,b.start&&b.start(i,c)}),a.on("touchcancel",function(a){f(),l=!1,b.cancel&&b.cancel(a)}),a.on("touchend",function(a){var c=Date.now()-q,e=a.originalEvent||a,g=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],h=g[0],i=h.clientX,k=h.clientY,m=Math.sqrt(Math.pow(i-t,2)+Math.pow(k-u,2));if(v&&n>c&&o>m){if(j(i,k),p&&p.blur(),!l)return;l=!1,b.end&&b.end(d(a),a)}f()}),a.onclick=function(a){},a.on("click",function(a,c){l=!1,b.tap&&b.tap(d(a),a)}),a.on("mousedown",function(c){a.addClass(r),i=d(c),l=!0,g=0,h=0,k=i,b.start&&b.start(i,c)}),a.on("mousemove",function(b){a.removeClass(r)}),a.on("mouseup",function(c){a.removeClass(r),l&&(l=!1,b.end&&b.end(d(c),c))})}}}}]),ngTouch.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),ngTouch.directive("ngClick",["$parse","$timeout","$rootElement",function(a,b,c){var d=750,e=12,f="ng-click-active";return function(b,c,g){function h(){n=!1,c.removeClass(f)}var i,j,k,l,m=a(g.ngClick),n=!1;c.on("touchstart",function(a){n=!0,i=a.target?a.target:a.srcElement,3==i.nodeType&&(i=i.parentNode),c.addClass(f),j=Date.now();var b=a.originalEvent||a,d=b.touches&&b.touches.length?b.touches:[b],e=d[0];k=e.clientX,l=e.clientY}),c.on("touchcancel",function(a){h()}),c.on("touchend",function(a){var b=Date.now()-j,f=a.originalEvent||a,m=f.changedTouches&&f.changedTouches.length?f.changedTouches:f.touches&&f.touches.length?f.touches:[f],o=m[0],p=o.clientX,q=o.clientY,r=Math.sqrt(Math.pow(p-k,2)+Math.pow(q-l,2));n&&d>b&&e>r&&(preventGhostClick(p,q),i&&i.blur(),angular.isDefined(g.disabled)&&g.disabled!==!1||c.triggerHandler("click",[a])),h()}),c.onclick=function(a){},c.on("click",function(a,c){b.$apply(function(){m(b,{$event:c||a})})}),c.on("mousedown",function(a){c.addClass(f)}),c.on("mousemove mouseup",function(a){c.removeClass(f)})}}]),makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight");